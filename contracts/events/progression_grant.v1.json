{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "progression_grant.v1.json",
  "title": "Progression Grant Event", 
  "description": "Tracks when XP, mastery points, or rewards are granted to a player",
  "type": "object",
  "required": ["event", "v", "ts", "userId", "grantType", "amount", "reason", "sessionHash"],
  "properties": {
    "event": {
      "type": "string",
      "const": "progression_grant"
    },
    "v": {
      "type": "string",
      "const": "1.0"
    },
    "ts": {
      "type": "integer",
      "description": "Unix timestamp in seconds"
    },
    "userId": {
      "type": "string",
      "pattern": "^u_[a-zA-Z0-9]+$",
      "description": "Unique user identifier"
    },
    "grantType": {
      "type": "string",
      "enum": ["account_xp", "character_xp", "mastery_points", "cosmetic_unlock", "title_unlock", "achievement"],
      "description": "Type of progression being granted"
    },
    "amount": {
      "type": "integer",
      "minimum": 0,
      "description": "Amount granted (for XP/points)"
    },
    "reason": {
      "type": "string",
      "enum": ["match_victory", "match_participation", "daily_objective", "weekly_objective", "lab_completion", "prestige", "mentor_activity"],
      "description": "Why the progression was granted"
    },
    "sessionHash": {
      "type": "string",
      "pattern": "^s_[a-zA-Z0-9]+$",
      "description": "Session this grant occurred in"
    },
    "itemId": {
      "type": "string",
      "description": "ID of unlocked item (for cosmetics/titles)"
    },
    "characterId": {
      "type": "string",
      "description": "Character this progression applies to (if character-specific)"
    },
    "previousLevel": {
      "type": "integer",
      "minimum": 0,
      "description": "Previous level before this grant"
    },
    "newLevel": {
      "type": "integer", 
      "minimum": 0,
      "description": "New level after this grant"
    },
    "prestigeLevel": {
      "type": "integer",
      "minimum": 0,
      "description": "Current prestige level"
    }
  },
  "additionalProperties": false
}