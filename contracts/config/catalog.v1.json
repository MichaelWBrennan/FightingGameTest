{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "catalog.v1.json",
  "title": "Store Catalog Configuration",
  "description": "Configuration for store items, pricing, and bundles",
  "type": "object",
  "required": ["version", "items", "bundles", "storeRotation"],
  "properties": {
    "version": {
      "type": "string",
      "pattern": "^\\d+\\.\\d+\\.\\d+$",
      "description": "Configuration version"
    },
    "items": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["id", "name", "type", "pricing", "availability"],
        "properties": {
          "id": {
            "type": "string",
            "description": "Unique item identifier"
          },
          "name": {
            "type": "string",
            "description": "Item display name"
          },
          "description": {
            "type": "string",
            "description": "Item description"
          },
          "type": {
            "type": "string",
            "enum": ["skin", "title", "banner", "announcer", "vfx_palette", "stage_variant"],
            "description": "Type of cosmetic item"
          },
          "rarity": {
            "type": "string",
            "enum": ["common", "rare", "epic", "legendary"],
            "description": "Item rarity (affects pricing tier)"
          },
          "pricing": {
            "type": "object",
            "required": ["basePrice", "currencies"],
            "properties": {
              "basePrice": {
                "type": "number",
                "minimum": 0,
                "description": "Base price in USD"
              },
              "currencies": {
                "type": "object",
                "patternProperties": {
                  "^[A-Z]{3}$": {
                    "type": "object",
                    "required": ["price", "taxInclusive"],
                    "properties": {
                      "price": {
                        "type": "number",
                        "minimum": 0
                      },
                      "taxInclusive": {
                        "type": "boolean"
                      }
                    }
                  }
                }
              }
            }
          },
          "availability": {
            "type": "object",
            "required": ["permanent", "returnWindowDays"],
            "properties": {
              "permanent": {
                "type": "boolean",
                "description": "Whether item is always available"
              },
              "returnWindowDays": {
                "type": "integer",
                "minimum": 0,
                "description": "Days until item returns to store"
              },
              "seasonalEvent": {
                "type": "string",
                "description": "Associated seasonal event (if any)"
              },
              "unlockConditions": {
                "type": "array",
                "items": {
                  "type": "object",
                  "required": ["type", "value"],
                  "properties": {
                    "type": {
                      "type": "string",
                      "enum": ["account_level", "character_mastery", "achievement", "event_participation"]
                    },
                    "value": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "characterId": {
            "type": "string",
            "description": "Character this item applies to (if character-specific)"
          },
          "previewAssets": {
            "type": "object",
            "properties": {
              "thumbnail": {
                "type": "string",
                "format": "uri"
              },
              "preview": {
                "type": "string",
                "format": "uri"
              },
              "video": {
                "type": "string",
                "format": "uri"
              }
            }
          }
        }
      }
    },
    "bundles": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["id", "name", "items", "pricing", "availability"],
        "properties": {
          "id": {
            "type": "string",
            "description": "Unique bundle identifier"
          },
          "name": {
            "type": "string",
            "description": "Bundle display name"
          },
          "description": {
            "type": "string",
            "description": "Bundle description"
          },
          "items": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Item IDs included in bundle"
          },
          "pricing": {
            "type": "object",
            "required": ["bundlePrice", "individualTotal", "currencies"],
            "properties": {
              "bundlePrice": {
                "type": "number",
                "minimum": 0,
                "description": "Bundle price in USD"
              },
              "individualTotal": {
                "type": "number",
                "minimum": 0,
                "description": "Total if bought individually"
              },
              "savingsPercent": {
                "type": "number",
                "minimum": 0,
                "maximum": 100,
                "description": "Percentage savings"
              },
              "currencies": {
                "type": "object",
                "patternProperties": {
                  "^[A-Z]{3}$": {
                    "type": "object",
                    "required": ["bundlePrice", "individualTotal"],
                    "properties": {
                      "bundlePrice": {
                        "type": "number",
                        "minimum": 0
                      },
                      "individualTotal": {
                        "type": "number",
                        "minimum": 0
                      }
                    }
                  }
                }
              }
            }
          },
          "availability": {
            "type": "object",
            "required": ["startTime", "endTime"],
            "properties": {
              "startTime": {
                "type": "integer",
                "description": "Bundle availability start (Unix timestamp)"
              },
              "endTime": {
                "type": "integer",
                "description": "Bundle availability end (Unix timestamp)"
              },
              "returnDate": {
                "type": "integer",
                "description": "When bundle returns (Unix timestamp)"
              }
            }
          }
        }
      }
    },
    "storeRotation": {
      "type": "object",
      "required": ["featured", "daily", "weekly"],
      "properties": {
        "featured": {
          "type": "object",
          "required": ["rotationDays", "itemCount"],
          "properties": {
            "rotationDays": {
              "type": "integer",
              "minimum": 1
            },
            "itemCount": {
              "type": "integer",
              "minimum": 1
            }
          }
        },
        "daily": {
          "type": "object",
          "required": ["rotationDays", "itemCount"],
          "properties": {
            "rotationDays": {
              "type": "integer",
              "minimum": 1
            },
            "itemCount": {
              "type": "integer",
              "minimum": 1
            }
          }
        },
        "weekly": {
          "type": "object",
          "required": ["rotationDays", "itemCount"],
          "properties": {
            "rotationDays": {
              "type": "integer",
              "minimum": 1
            },
            "itemCount": {
              "type": "integer",
              "minimum": 1
            }
          }
        }
      }
    }
  },
  "additionalProperties": false
}